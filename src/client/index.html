<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="google-site-verification" content="MUJ1d6HBHYNII_Gzc9shEx4S3o9SdsyGZN6iHX_nJ0M" />
    <meta charset="utf-8">
    <title>Qtime</title>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="build/bundle.css">
    <link rel="chrome-webstore-item"
    href="https://chrome.google.com/webstore/detail/bldcellajihanglphncgjmceklbibjkk">
<!--     <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="grid.css">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="nouislider.min.css"> -->


  </head>
  <body>


    <!-- template for the login/signup component -->
    <script type="text/x-template" id="login-template">
      <transition name="modal">
        <div class="login modal-mask" @click="$emit('close')">
          <div class="modal-wrapper">
            <div class="modal-container" @click.stop>

              <div class="modal-header">
                <slot name="header">

                  <span class="modal-option" v-for="option in options">
                    <input type="radio"
                      :id="option"
                      :value="option"
                      name="option"
                      v-model="selected">
                    <label :for="option">{{ option }}</label>
                  </span>
                </slot>
              </div>

              <div v-on:keyup.enter="submit"  class="modal-body">
                <input type="text" name="username" placeholder="Username" v-model="username">
                <input v-if="selected=='Sign up'" name="email" type="text" placeholder="Email" v-model="email">
                <input type="password" name="password" placeholder="Password" v-model="password">
                <input v-if="selected=='Sign up'" type="password" placeholder="Confirm password" v-model="password2">
                <span class="login-tips" v-if="selected!='Sign up'">
                <label id="remember-me"><input type="checkbox" v-model="remember"/> Remember me</label> 
                <a id="forgot-password">Forgot password?</a>
                </span>
              </div>

              <div class="modal-footer">
                <slot name="footer">
                  <span class="login-response" v-bind:class="{error: loginOrSignupFailed}">{{serverresponse}}</span>

                  <button class="modal-button" @click="submit">
                    OK
                  </button>                  
                  <button class="modal-button" @click="$emit('close')">
                    Cancel
                  </button>
                </slot>
              </div>
            </div>
          </div>
        </div>
      </transition>
    </script>

    <!-- template for the modal component -->
    <script type="text/x-template" id="modal-template">
      <transition name="modal">
        <div class="modal-mask" @click="$emit('close')">
          <div class="modal-wrapper">
            <div class="modal-container" @click.stop>

              <div class="modal-header">
                <slot name="header">
                  {{header}}
                </slot>
              </div>

              <div class="modal-body">
                <textarea rows="5" name="body" v-model="cellObj.val"></textarea>
                
              </div>

              <div class="modal-footer">
                <slot name="footer">
                  <button class="modal-button" @click="$root.$emit('update-cell')">
                    Save
                  </button>                  
                  <button class="modal-button" @click="$emit('close')">
                    Cancel
                  </button>
                </slot>
              </div>
            </div>
          </div>
        </div>
      </transition>
    </script>

    <!-- template for grid-->
    <script type="text/x-template" id="grid-template">
      <table id="entryGrid">

        <thead>
          <tr>
            <th v-for="key in columns"
              @click="sortBy(key)"
              :class="{active: sortKey == key}">
              {{ getColName(key) | capitalize }}
              <span class="arrow"
                :class="sortOrders[key] > 0 ? 'asc' : 'dsc'">
              </span>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="
            entry in filteredData">
            <td v-for="key in columns" @dblclick="$root.$emit('edit-cell', entry, key)">

              <a v-if="key=='link' && entry[key]" target="_blank" :href="prepareLink(entry[key])">&nearr;</a>
              <span v-else>
                {{entry[key]}} 
              </span>
              <div class="contentTooltip">{{entry[key]}}</div>

            </td>


            <button title="recover this entry" v-if="$root.showDeleted" @click="$root.$emit('recover entry', entry)" class="recover-entry manage-entry">+</button>

            <button title="delete this entry" v-if="$root.canEdit" @click="$root.$emit('remove entry', entry)" class="manage-entry">x</button>          
            <button title="add this entry to my list" v-if="$root.canAddToMyList" @click="$root.addEntry(entry, false)" class="manage-entry">+</button>


          </tr>
        </tbody>
      </table>

    </script>
























    <div class="ajax-mask"></div>

    <div id="qtime-wrapper">
      <div id="header-wrapper">
        <div class="header">
          <span id="qtimeTitle" onclick="location.reload()">Qtime</span>




            <button v-cloak onclick="chrome.webstore.install()" id="install-button">{{chromeExtension}}</button>
          <div class="float-right">

            <span v-cloak v-if="!login">
              <button v-cloak @click="loginPopup = 'Sign up'">{{headerRegister}}</button> | 
              <button v-cloak @click="loginPopup = 'Log in'">{{headerIntroLogin}}</button>
            </span>
            <span v-cloak v-if="login">
              <span v-cloak id="welcome-msg">Hi, {{username}}! </span>

              <span class="modal-option" v-for="option in tableOptions">
                <input type="radio"
                  :value="option"
                  :id="option"
                  name="option"
                  v-model="selectedTable">
                <label :for="option" :title="trendingOrMyStuffTitle(option)">{{ trendingOrMyStuffName(option) }}</label>
              </span>

              <button v-cloak class="logout" @click="logout">{{headerLogout}}</button>
            </span>
          </div>
        </div>
      </div>
      <div id="blank-space"></div>
      <div id="qtime">

        <login
          :passin="loginPopup"
          v-if="loginPopup" @close="loginPopup = null">
        </login>

        <!-- use the modal component, pass in the prop -->
        <modal
          :header="editCellName"
          :cell-obj="editCellValObj"
          v-if="showModal" @close="showModal = false">
        </modal>


        <div id="ajaxMsg"></div>
        <div v-cloak v-if="showTip && !login" id="qtime-tip">
          <img class='header-img' src="qtime-header.png"/>
          <div v-cloak class='header-introduction'>
            {{headerIntroduction}}<br/><br/>
            {{headerIntroChromeExtension}} - 
            <a href='#' @click='chrome.webstore.install()'>{{chromeExtension}}</a>
            <br/><br/>{{headerIntroRegistration}} - 
            <a href="#" style="" @click="loginPopup = 'Log in'">{{headerIntroLogin}}</a>

          </div>


        </div>
        <div id="leftWrapper">
          <input id="search" name="query" v-bind:placeholder="searchTitle" v-model="searchQuery">
          
          <div v-cloak id="durationSlider-description">{{setTimeRangeTitle}}</div>
          <div id="durationSliderWrapper">
            <div id="durationSlider"></div>
          </div>
          <center>
            <div v-cloak id="select-category-description">{{selectCategoryTitle}}</div>
            <div v-cloak class="selected-category-wrapper">
              <select id="select-category" v-cloak v-model="selectedCategory" multiple v-bind:size="options.length">
                <option v-for="option in options" v-bind:value="option.value">
                  {{ option.text }}
                </option>
              </select>
            </div>
          </center>
          <button v-cloak class="show-deleted" v-if="canEdit && showDeleted" @click="showDeleted=false">{{hideDeletedTitle}}</button>          
          <button v-cloak class="show-deleted" v-if="canEdit && !showDeleted" @click="showDeleted=true">{{showDeletedTitle}}</button>



        </div>
        <div id="rightWrapper">
          <center class="deleted-tips" v-cloak  v-if="showDeleted">{{deletedTableHeaderTitle}} </center> 
          <div v-cloak v-if="canEdit && !showDeleted" id="addEntryWrapper">
            <table id="addEntry">
              <tbody>
                <tr>
                  <td><input v-model="newEntryName" v-on:blur="closeCandidateDropdown" v-on:keyup="newEntryNameChanged" type="text"  v-bind:placeholder="newEntryPlaceHoderName" />
                  </td>
                  <td><input v-model="newEntryDuration" type="text" v-bind:placeholder="newEntryPlaceHoderTime" /></td>
                  <td><input v-model="newEntryCategory" type="text" v-bind:placeholder="newEntryPlaceHoderCategory" /></td>
                  <td><input v-model="newEntryLink" type="text" v-bind:placeholder="newEntryPlaceHoderLink" /></td>
                  <td><input v-model="newEntryNote" type="text" v-bind:placeholder="newEntryPlaceHoderNote" /></td>

                </tr>
              </tbody>
            </table>                
            <button title="add new entry to your list" v-on:click="addEntryByInput" type="button" id="addEntryBtn">+</button>
          </div>

          <div id="addEntryCandidate">

            <p v-if= "newEntryCandidates.length" v-cloak v-for="candidate in newEntryCandidates" v-on:click="pickCandidate(candidate)">
              {{ candidate.Title }} <span class="rightFloat">{{ candidate.Type}}&nbsp;&nbsp;&nbsp;{{ candidate.Year }}</span>
            </p>
            <p v-if= "newEntryCandidates.length==0">Not found.</p>
          </div>
          <qtime-grid
            :data="gridData"
            :columns="gridColumns"
            :filter-key="searchQuery"
            :selected-category="selectedCategory"
            :duration-min="durationMin"
            :duration-max="durationMax"
            :show-deleted="showDeleted">
          </qtime-grid>
        </div>
      </div>

    </div>

    <footer>
      <div v-cloak class="footer-inner">
        Qtime © 2016  
        <a href="https://github.com/Arch1tect/Qtime/issues">{{feedback}}</a>
        <a href="https://github.com/Arch1tect/Qtime/blob/master/README.md">{{about}}</a> 
      </div>
    </footer>



<!--     <script src="jquery-3.1.0.min.js"></script>
    <script src="vue2.js"></script>
    <script src="nouislider.min.js"></script>
    <script src="grid.js"></script>
    <script src="modal.js"></script>
    <script src="qtime.js"></script>
    <script src="durationSlider.js"></script>
    <script src="app.js"></script> -->
    <script src="build/bundle.js"></script>


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-88032977-1', 'auto');
      ga('send', 'pageview');

    </script>

  </body>
</html>